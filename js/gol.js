!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=i,this.model.on("init",this.initGrid.bind(this))}var t,i,r;return t=e,(i=[{key:"initGrid",value:function(){var e=this.model.gridSize;this.view.createGrid({size:e})}},{key:"live",value:function(e){var t=e.row,i=e.col;this.model.live({row:t,col:i})}},{key:"die",value:function(e){var t=e.row,i=e.col;this.model.die({row:t,col:i})}},{key:"clearGrid",value:function(){this.model.clearGrid()}},{key:"randomGrid",value:function(){this.model.computeRandomGrid()}},{key:"play",value:function(){this.model.play()}},{key:"pause",value:function(){this.model.pause()}},{key:"setSpeed",value:function(e){this.model.setSpeed(+e)}}])&&n(t.prototype,i),r&&n(t,r),e}();t.default=r},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.controller,this.gridSize=t.gridSize,this.cellSize=17,this.init(),this.model.on("clearGrid",this.clearGrid.bind(this)),this.model.on("live",this.live.bind(this)),this.model.on("die",this.die.bind(this)),this.model.on("compute",this.displayUpdatedGrid.bind(this)),this.model.on("play",this.play.bind(this)),this.model.on("pause",this.pause.bind(this))}var t,i,r;return t=e,(i=[{key:"init",value:function(){this.gridContainer=document.querySelector("#grid"),this.clearBtn=document.querySelector("#reset-button"),this.randomGridBtn=document.querySelector("#randomize-button"),this.togglePlayBtn=document.querySelector("#play-button"),this.speedRange=document.querySelector("#speed-slider"),this.gridContainer.addEventListener("click",this.handleGridClick.bind(this)),this.clearBtn.addEventListener("click",this.handleClear.bind(this)),this.randomGridBtn.addEventListener("click",this.handleRandomGrid.bind(this)),this.togglePlayBtn.addEventListener("click",this.handleTogglePlayBtnClick.bind(this)),this.speedRange.addEventListener("input",this.handleSpeedChange.bind(this))}},{key:"initController",value:function(e){this.controller=e}},{key:"createGrid",value:function(){var e=new DocumentFragment;this.model.grid.forEachCell(function(t){var i=t.getDOMElement();e.appendChild(i)}),this.gridContainer.appendChild(e),Object.assign(this.gridContainer.style,{width:"".concat(this.gridSize*this.cellSize,"px"),height:"".concat(this.gridSize*this.cellSize,"px"),gridTemplate:"repeat(".concat(this.gridSize,", 1fr) / repeat(").concat(this.gridSize,", 1fr)")})}},{key:"handleGridClick",value:function(e){var t=e.target;if("grid"!==t.id){var i=t.getAttribute("data-row"),n=t.getAttribute("data-col");t.classList.contains("alive")?this.controller.die({row:i,col:n}):this.controller.live({row:i,col:n})}}},{key:"handleClear",value:function(){this.controller.clearGrid()}},{key:"handleRandomGrid",value:function(){this.controller.randomGrid()}},{key:"handleTogglePlayBtnClick",value:function(){this.model.isPlaying?this.controller.pause():this.controller.play()}},{key:"handleSpeedChange",value:function(){var e=this.speedRange.value;this.controller.setSpeed(e)}},{key:"live",value:function(e){var t=e.row,i=e.col;this._getCellElement({row:t,col:i}).classList.add("alive")}},{key:"die",value:function(e){var t=e.row,i=e.col;this._getCellElement({row:t,col:i}).classList.remove("alive")}},{key:"clearGrid",value:function(){Array.prototype.forEach.call(this.gridContainer.children,function(e){return e.classList.remove("alive")})}},{key:"displayUpdatedGrid",value:function(){var e=this;this.model.grid.forEachCell(function(t,i,n){var r=e._getCellElement({row:i,col:n});t.isAlive?r.classList.add("alive"):r.classList.remove("alive")})}},{key:"play",value:function(){this.togglePlayBtn.textContent="pause"}},{key:"pause",value:function(){this.togglePlayBtn.textContent="play_arrow"}},{key:"_getCellElement",value:function(e){var t=e.row,i=e.col;return this.gridContainer.querySelector('[data-row="'.concat(t,'"][data-col="').concat(i,'"]'))}}])&&n(t.prototype,i),r&&n(t,r),e}();t.default=r},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var t,i,r;return t=e,(i=[{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.events[e]&&this.events[e].forEach(function(e){return e.apply(void 0,i)})}}])&&n(t.prototype,i),r&&n(t,r),e}();t.EventEmitter=r},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){var i=t.row,n=t.col,r=t.isAlive,o=void 0!==r&&r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._row=i,this._col=n,this._isAlive=o}var t,i,r;return t=e,(i=[{key:"live",value:function(){this._isAlive=!0}},{key:"die",value:function(){this._isAlive=!1}},{key:"getDOMElement",value:function(){var e=document.createElement("div");return e.classList.add("grid-cell"),this.isAlive&&e.classList.add("alive"),e.setAttribute("data-row",this.row),e.setAttribute("data-col",this.col),e}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}},{key:"isAlive",get:function(){return this._isAlive}}])&&n(t.prototype,i),r&&n(t,r),e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(3))&&n.__esModule?n:{default:n};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=t,this._cells=[],this.init()}var t,i,n;return t=e,(i=[{key:"init",value:function(){for(var e=0;e<this.size;e++){this._cells[e]=[];for(var t=0;t<this.size;t++)this._cells[e][t]=new r.default({row:e,col:t})}}},{key:"forEachCell",value:function(e){for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)e(this.cells[t][i],t,i)}},{key:"cells",get:function(){return this._cells}}])&&o(t.prototype,i),n&&o(t,n),e}();t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(4))&&n.__esModule?n:{default:n},o=i(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(e){var i,n,r,o=e.gridSize,a=void 0===o?36:o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(i=!(r=s(t).call(this))||"object"!==l(r)&&"function"!=typeof r?c(n):r).gridSize=a,i.gameSpeed=100,i.isPlaying=!1,i.grid,i.computeNextGrid=i.computeNextGrid.bind(c(c(i))),i}var i,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.EventEmitter),i=t,(n=[{key:"init",value:function(){this.grid=new r.default(this.gridSize),this.emit("init",this.gridSize)}},{key:"live",value:function(e){var t=e.row,i=e.col;this.grid.cells[t][i].live(),this.emit("live",{row:t,col:i})}},{key:"die",value:function(e){var t=e.row,i=e.col;this.grid.cells[t][i].die(),this.emit("die",{row:t,col:i})}},{key:"clearGrid",value:function(){this.grid.forEachCell(function(e){return e.die()}),this.pause(),this.emit("clearGrid")}},{key:"computeRandomGrid",value:function(){this.clearGrid(),this.grid.forEachCell(function(e){Math.random()<.5&&e.live()}),this.emit("compute")}},{key:"computeNextGrid",value:function(){var e=this,t=new r.default(this.gridSize);this.grid.forEachCell(function(i,n,r){(i.isAlive&&2===e._countAliveNeighbors(i)||3===e._countAliveNeighbors(i))&&t.cells[n][r].live()}),this.grid=t,this.emit("compute")}},{key:"play",value:function(){this.interval=setInterval(this.computeNextGrid,this.gameSpeed),this.isPlaying=!0,this.emit("play")}},{key:"pause",value:function(){clearInterval(this.interval),this.interval=null,this.isPlaying=!1,this.emit("pause")}},{key:"setSpeed",value:function(e){this.gameSpeed=e,this.isPlaying&&(clearInterval(this.interval),this.interval=setInterval(this.computeNextGrid,this.gameSpeed))}},{key:"_countAliveNeighbors",value:function(e){for(var t=e.row,i=e.col,n=0,r=-1;r<=1;r++)if(this.grid.cells[t+r])for(var o=-1;o<=1;o++)0===r&&0===o||this.grid.cells[t+r][i+o]&&this.grid.cells[t+r][i+o].isAlive&&(n+=1);return n}}])&&a(i.prototype,n),d&&a(i,d),t}();t.default=d},function(e,t,i){"use strict";var n=l(i(5)),r=l(i(1)),o=l(i(0));function l(e){return e&&e.__esModule?e:{default:e}}var a=new n.default({gridSize:36}),s=new r.default(a),u=new o.default(a,s);s.initController(u),a.init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2dyaWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbnRyb2xsZXIiLCJtb2RlbCIsInZpZXciLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwib24iLCJpbml0R3JpZCIsInNpemUiLCJncmlkU2l6ZSIsImNyZWF0ZUdyaWQiLCJyb3ciLCJfcmVmIiwiY29sIiwibGl2ZSIsIl9yZWYyIiwiZGllIiwiY2xlYXJHcmlkIiwiY29tcHV0ZVJhbmRvbUdyaWQiLCJwbGF5IiwicGF1c2UiLCJzcGVlZCIsInNldFNwZWVkIiwiVmlldyIsImNvbnRyb2xsZXIiLCJjZWxsU2l6ZSIsImluaXQiLCJkaXNwbGF5VXBkYXRlZEdyaWQiLCJncmlkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXJCdG4iLCJyYW5kb21HcmlkQnRuIiwidG9nZ2xlUGxheUJ0biIsInNwZWVkUmFuZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlR3JpZENsaWNrIiwiaGFuZGxlQ2xlYXIiLCJoYW5kbGVSYW5kb21HcmlkIiwiaGFuZGxlVG9nZ2xlUGxheUJ0bkNsaWNrIiwiaGFuZGxlU3BlZWRDaGFuZ2UiLCJkb2NGciIsIkRvY3VtZW50RnJhZ21lbnQiLCJncmlkIiwiZm9yRWFjaENlbGwiLCJjZWxsIiwiY2VsbEVsZW1lbnQiLCJnZXRET01FbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJhc3NpZ24iLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiZ3JpZFRlbXBsYXRlIiwiY29uY2F0IiwiZWxlbWVudCIsInRhcmdldCIsImlkIiwiZ2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyYW5kb21HcmlkIiwiaXNQbGF5aW5nIiwiX2dldENlbGxFbGVtZW50IiwiYWRkIiwiX3JlZjMiLCJyZW1vdmUiLCJBcnJheSIsImZvckVhY2giLCJjaGlsZHJlbiIsIl90aGlzIiwiaXNBbGl2ZSIsInRleHRDb250ZW50IiwiX3JlZjQiLCJFdmVudEVtaXR0ZXIiLCJldmVudHMiLCJ0eXBlIiwiY2FsbGJhY2siLCJwdXNoIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJfa2V5IiwiQ2VsbCIsIl9yZWYkaXNBbGl2ZSIsIl9yb3ciLCJfY29sIiwiX2lzQWxpdmUiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiX2NlbGwiLCJHcmlkIiwiX2NlbGxzIiwiY2VsbHMiLCJfZ3JpZCIsIl9oZWxwZXJzIiwiTW9kZWwiLCJfcmVmJGdyaWRTaXplIiwiX2dldFByb3RvdHlwZU9mIiwiZ2FtZVNwZWVkIiwiY29tcHV0ZU5leHRHcmlkIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsImVtaXQiLCJNYXRoIiwicmFuZG9tIiwiX3RoaXMyIiwibmV4dEdyaWQiLCJfY291bnRBbGl2ZU5laWdoYm9ycyIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY291bnQiLCJfbW9kZWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3ZpZXciLCJfY29udHJvbGxlciIsImluaXRDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJC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QUFjMUcsS0FBS3dHLFVBQ25CeEcsS0FBS3dHLFNBQVcsS0FFaEJ4RyxLQUFLeUQsV0FBWSxFQUVqQnpELEtBQUtrRyxLQUFLLDBDQUdMbEYsR0FDTGhCLEtBQUsrRixVQUFZL0UsRUFFYmhCLEtBQUt5RCxZQUNMaUQsY0FBYzFHLEtBQUt3RyxVQUNuQnhHLEtBQUt3RyxTQUFXQyxZQUFZekcsS0FBS2dHLGdCQUFpQmhHLEtBQUsrRiw0REFPM0QsSUFIK0IsSUFBWnpGLEVBQVk4RCxFQUFaOUQsSUFBS0UsRUFBTzRELEVBQVA1RCxJQUNwQm1HLEVBQVEsRUFFSGpJLEdBQUssRUFBR0EsR0FBSyxFQUFHQSxJQUNyQixHQUFLc0IsS0FBS3NDLEtBQUttRCxNQUFNbkYsRUFBTTVCLEdBRTNCLElBQUssSUFBSVQsR0FBSyxFQUFHQSxHQUFLLEVBQUdBLElBQ1gsSUFBTlMsR0FBaUIsSUFBTlQsR0FHWCtCLEtBQUtzQyxLQUFLbUQsTUFBTW5GLEVBQU01QixHQUFHOEIsRUFBTXZDLElBQy9CK0IsS0FBS3NDLEtBQUttRCxNQUFNbkYsRUFBTTVCLEdBQUc4QixFQUFNdkMsR0FBR2lHLFVBRWxDeUMsR0FBUyxHQUtyQixPQUFPQSxpRkNqSGYsSUFBQUMsRUFBQUMsRUFBQXJKLEVBQUEsSUFDQXNKLEVBQUFELEVBQUFySixFQUFBLElBQ0F1SixFQUFBRixFQUFBckosRUFBQSx1REFFQSxJQUFNcUMsRUFBUSxJQUFJK0YsV0FDZHhGLFNBQVUsS0FFUk4sRUFBTyxJQUFJb0IsVUFBS3JCLEdBQ2hCc0IsRUFBYSxJQUFJdkIsVUFBV0MsRUFBT0MsR0FFekNBLEVBQUtrSCxlQUFlN0YsR0FFcEJ0QixFQUFNd0IiLCJmaWxlIjoiZ29sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuXG4gICAgICAgIHRoaXMubW9kZWwub24oJ2luaXQnLCB0aGlzLmluaXRHcmlkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGluaXRHcmlkKCkge1xuICAgICAgICBjb25zdCBzaXplID0gdGhpcy5tb2RlbC5ncmlkU2l6ZTtcblxuICAgICAgICB0aGlzLnZpZXcuY3JlYXRlR3JpZCh7IHNpemUgfSk7XG4gICAgfVxuXG4gICAgbGl2ZSh7IHJvdywgY29sIH0pIHtcbiAgICAgICAgdGhpcy5tb2RlbC5saXZlKHsgcm93LCBjb2wgfSk7XG4gICAgfVxuXG4gICAgZGllKHsgcm93LCBjb2wgfSkge1xuICAgICAgICB0aGlzLm1vZGVsLmRpZSh7IHJvdywgY29sIH0pO1xuICAgIH1cblxuICAgIGNsZWFyR3JpZCgpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5jbGVhckdyaWQoKTtcbiAgICB9XG5cbiAgICByYW5kb21HcmlkKCkge1xuICAgICAgICB0aGlzLm1vZGVsLmNvbXB1dGVSYW5kb21HcmlkKCk7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5wbGF5KCk7XG4gICAgfVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMubW9kZWwucGF1c2UoKTtcbiAgICB9XG5cbiAgICBzZXRTcGVlZChzcGVlZCkge1xuICAgICAgICB0aGlzLm1vZGVsLnNldFNwZWVkKCtzcGVlZCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IobW9kZWwpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXI7XG5cbiAgICAgICAgdGhpcy5ncmlkU2l6ZSA9IG1vZGVsLmdyaWRTaXplO1xuICAgICAgICB0aGlzLmNlbGxTaXplID0gMTc7XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgdGhpcy5tb2RlbC5vbignY2xlYXJHcmlkJywgdGhpcy5jbGVhckdyaWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubW9kZWwub24oJ2xpdmUnLCB0aGlzLmxpdmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubW9kZWwub24oJ2RpZScsIHRoaXMuZGllLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLm1vZGVsLm9uKCdjb21wdXRlJywgdGhpcy5kaXNwbGF5VXBkYXRlZEdyaWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubW9kZWwub24oJ3BsYXknLCB0aGlzLnBsYXkuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubW9kZWwub24oJ3BhdXNlJywgdGhpcy5wYXVzZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmdyaWRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ3JpZCcpO1xuICAgICAgICB0aGlzLmNsZWFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc2V0LWJ1dHRvbicpO1xuICAgICAgICB0aGlzLnJhbmRvbUdyaWRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9taXplLWJ1dHRvbicpO1xuICAgICAgICB0aGlzLnRvZ2dsZVBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheS1idXR0b24nKTtcbiAgICAgICAgdGhpcy5zcGVlZFJhbmdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NwZWVkLXNsaWRlcicpO1xuXG4gICAgICAgIHRoaXMuZ3JpZENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlR3JpZENsaWNrLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGVhci5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJhbmRvbUdyaWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVJhbmRvbUdyaWQuYmluZCh0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMudG9nZ2xlUGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlUGxheUJ0bkNsaWNrLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnNwZWVkUmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdpbnB1dCcsXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNwZWVkQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpbml0Q29udHJvbGxlcihjb250cm9sbGVyKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gICAgfVxuXG4gICAgY3JlYXRlR3JpZCgpIHtcbiAgICAgICAgbGV0IGRvY0ZyID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICB0aGlzLm1vZGVsLmdyaWQuZm9yRWFjaENlbGwoY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGNlbGwuZ2V0RE9NRWxlbWVudCgpO1xuXG4gICAgICAgICAgICBkb2NGci5hcHBlbmRDaGlsZChjZWxsRWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZ3JpZENvbnRhaW5lci5hcHBlbmRDaGlsZChkb2NGcik7XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmdyaWRDb250YWluZXIuc3R5bGUsIHtcbiAgICAgICAgICAgIHdpZHRoOiBgJHt0aGlzLmdyaWRTaXplICogdGhpcy5jZWxsU2l6ZX1weGAsXG4gICAgICAgICAgICBoZWlnaHQ6IGAke3RoaXMuZ3JpZFNpemUgKiB0aGlzLmNlbGxTaXplfXB4YCxcbiAgICAgICAgICAgIGdyaWRUZW1wbGF0ZTogYHJlcGVhdCgke3RoaXMuZ3JpZFNpemV9LCAxZnIpIC8gcmVwZWF0KCR7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkU2l6ZVxuICAgICAgICAgICAgfSwgMWZyKWBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlR3JpZENsaWNrKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRhcmdldDtcblxuICAgICAgICBpZiAoZWxlbWVudC5pZCA9PT0gJ2dyaWQnKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgcm93ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcm93Jyk7XG4gICAgICAgIGNvbnN0IGNvbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuXG4gICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsaXZlJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5saXZlKHsgcm93LCBjb2wgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZGllKHsgcm93LCBjb2wgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVDbGVhcigpIHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmNsZWFyR3JpZCgpO1xuICAgIH1cblxuICAgIGhhbmRsZVJhbmRvbUdyaWQoKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5yYW5kb21HcmlkKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlVG9nZ2xlUGxheUJ0bkNsaWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMubW9kZWwuaXNQbGF5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIucGxheSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVTcGVlZENoYW5nZSgpIHtcbiAgICAgICAgY29uc3Qgc3BlZWQgPSB0aGlzLnNwZWVkUmFuZ2UudmFsdWU7XG5cbiAgICAgICAgdGhpcy5jb250cm9sbGVyLnNldFNwZWVkKHNwZWVkKTtcbiAgICB9XG5cbiAgICBsaXZlKHsgcm93LCBjb2wgfSkge1xuICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IHRoaXMuX2dldENlbGxFbGVtZW50KHsgcm93LCBjb2wgfSk7XG5cbiAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWxpdmUnKTtcbiAgICB9XG5cbiAgICBkaWUoeyByb3csIGNvbCB9KSB7XG4gICAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gdGhpcy5fZ2V0Q2VsbEVsZW1lbnQoeyByb3csIGNvbCB9KTtcblxuICAgICAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhbGl2ZScpO1xuICAgIH1cblxuICAgIGNsZWFyR3JpZCgpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmdyaWRDb250YWluZXIuY2hpbGRyZW4sIGVsZW1lbnQgPT5cbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWxpdmUnKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGRpc3BsYXlVcGRhdGVkR3JpZCgpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5ncmlkLmZvckVhY2hDZWxsKChjZWxsLCByb3csIGNvbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSB0aGlzLl9nZXRDZWxsRWxlbWVudCh7IHJvdywgY29sIH0pO1xuXG4gICAgICAgICAgICBpZiAoY2VsbC5pc0FsaXZlKSB7XG4gICAgICAgICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWxpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWxpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQbGF5QnRuLnRleHRDb250ZW50ID0gJ3BhdXNlJztcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQbGF5QnRuLnRleHRDb250ZW50ID0gJ3BsYXlfYXJyb3cnO1xuICAgIH1cblxuICAgIF9nZXRDZWxsRWxlbWVudCh7IHJvdywgY29sIH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgYFtkYXRhLXJvdz1cIiR7cm93fVwiXVtkYXRhLWNvbD1cIiR7Y29sfVwiXWBcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICB9XG5cbiAgICBvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmV2ZW50c1t0eXBlXSA9IHRoaXMuZXZlbnRzW3R5cGVdIHx8IFtdO1xuICAgICAgICB0aGlzLmV2ZW50c1t0eXBlXS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRzW3R5cGVdKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1t0eXBlXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENlbGwge1xuICAgIGNvbnN0cnVjdG9yKHsgcm93LCBjb2wsIGlzQWxpdmUgPSBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX3JvdyA9IHJvdztcbiAgICAgICAgdGhpcy5fY29sID0gY29sO1xuICAgICAgICB0aGlzLl9pc0FsaXZlID0gaXNBbGl2ZTtcbiAgICB9XG5cbiAgICBnZXQgcm93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm93O1xuICAgIH1cblxuICAgIGdldCBjb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2w7XG4gICAgfVxuXG4gICAgZ2V0IGlzQWxpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0FsaXZlO1xuICAgIH1cblxuICAgIGxpdmUoKSB7XG4gICAgICAgIHRoaXMuX2lzQWxpdmUgPSB0cnVlO1xuICAgIH1cblxuICAgIGRpZSgpIHtcbiAgICAgICAgdGhpcy5faXNBbGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldERPTUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZ3JpZC1jZWxsJyk7XG4gICAgICAgIGlmICh0aGlzLmlzQWxpdmUpIHtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FsaXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgdGhpcy5yb3cpO1xuICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sJywgdGhpcy5jb2wpO1xuXG4gICAgICAgIHJldHVybiBjZWxsRWxlbWVudDtcbiAgICB9XG59XG4iLCJpbXBvcnQgQ2VsbCBmcm9tICcuL2NlbGwuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkIHtcbiAgICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMuX2NlbGxzID0gW107XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgZ2V0IGNlbGxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VsbHM7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gdGhpcy5fY2VsbHMgPSBuZXcgQXJyYXkodGhpcy5zaXplKS5maWxsKG51bGwpO1xuXG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuc2l6ZTsgcm93KyspIHtcbiAgICAgICAgICAgIC8vIHRoaXMuX2NlbGxzW3Jvd10gPSBuZXcgQXJyYXkodGhpcy5zaXplKTtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxzW3Jvd10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgdGhpcy5zaXplOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NlbGxzW3Jvd11bY29sXSA9IG5ldyBDZWxsKHsgcm93LCBjb2wgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3JFYWNoQ2VsbChjYWxsYmFjaykge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLnNpemU7IHJvdysrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCB0aGlzLnNpemU7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5jZWxsc1tyb3ddW2NvbF0sIHJvdywgY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBHcmlkIGZyb20gJy4vZ3JpZC5qcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoeyBncmlkU2l6ZSA9IDM2IH0pIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG4gICAgICAgIHRoaXMuZ2FtZVNwZWVkID0gMTAwO1xuICAgICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdyaWQ7XG5cbiAgICAgICAgdGhpcy5jb21wdXRlTmV4dEdyaWQgPSB0aGlzLmNvbXB1dGVOZXh0R3JpZC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuZ3JpZCA9IG5ldyBHcmlkKHRoaXMuZ3JpZFNpemUpO1xuXG4gICAgICAgIHRoaXMuZW1pdCgnaW5pdCcsIHRoaXMuZ3JpZFNpemUpO1xuICAgIH1cblxuICAgIGxpdmUoeyByb3csIGNvbCB9KSB7XG4gICAgICAgIHRoaXMuZ3JpZC5jZWxsc1tyb3ddW2NvbF0ubGl2ZSgpO1xuXG4gICAgICAgIHRoaXMuZW1pdCgnbGl2ZScsIHsgcm93LCBjb2wgfSk7XG4gICAgfVxuXG4gICAgZGllKHsgcm93LCBjb2wgfSkge1xuICAgICAgICB0aGlzLmdyaWQuY2VsbHNbcm93XVtjb2xdLmRpZSgpO1xuXG4gICAgICAgIHRoaXMuZW1pdCgnZGllJywgeyByb3csIGNvbCB9KTtcbiAgICB9XG5cbiAgICBjbGVhckdyaWQoKSB7XG4gICAgICAgIHRoaXMuZ3JpZC5mb3JFYWNoQ2VsbChjZWxsID0+IGNlbGwuZGllKCkpO1xuXG4gICAgICAgIHRoaXMucGF1c2UoKTtcblxuICAgICAgICB0aGlzLmVtaXQoJ2NsZWFyR3JpZCcpO1xuICAgIH1cblxuICAgIGNvbXB1dGVSYW5kb21HcmlkKCkge1xuICAgICAgICB0aGlzLmNsZWFyR3JpZCgpO1xuXG4gICAgICAgIHRoaXMuZ3JpZC5mb3JFYWNoQ2VsbChjZWxsID0+IHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgICAgICAgY2VsbC5saXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZW1pdCgnY29tcHV0ZScpO1xuICAgIH1cblxuICAgIGNvbXB1dGVOZXh0R3JpZCgpIHtcbiAgICAgICAgbGV0IG5leHRHcmlkID0gbmV3IEdyaWQodGhpcy5ncmlkU2l6ZSk7XG5cbiAgICAgICAgdGhpcy5ncmlkLmZvckVhY2hDZWxsKChjZWxsLCByb3csIGNvbCkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChjZWxsLmlzQWxpdmUgJiYgdGhpcy5fY291bnRBbGl2ZU5laWdoYm9ycyhjZWxsKSA9PT0gMikgfHxcbiAgICAgICAgICAgICAgICB0aGlzLl9jb3VudEFsaXZlTmVpZ2hib3JzKGNlbGwpID09PSAzXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBuZXh0R3JpZC5jZWxsc1tyb3ddW2NvbF0ubGl2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmdyaWQgPSBuZXh0R3JpZDtcblxuICAgICAgICB0aGlzLmVtaXQoJ2NvbXB1dGUnKTtcbiAgICB9XG5cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jb21wdXRlTmV4dEdyaWQsIHRoaXMuZ2FtZVNwZWVkKTtcbiAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZW1pdCgncGxheScpO1xuICAgIH1cblxuICAgIHBhdXNlKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gbnVsbDtcblxuICAgICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgICB9XG5cbiAgICBzZXRTcGVlZChzcGVlZCkge1xuICAgICAgICB0aGlzLmdhbWVTcGVlZCA9IHNwZWVkO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUGxheWluZykge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNvbXB1dGVOZXh0R3JpZCwgdGhpcy5nYW1lU3BlZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NvdW50QWxpdmVOZWlnaGJvcnMoeyByb3csIGNvbCB9KSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgciA9IC0xOyByIDw9IDE7IHIrKykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdyaWQuY2VsbHNbcm93ICsgcl0pIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjID0gLTE7IGMgPD0gMTsgYysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHIgPT09IDAgJiYgYyA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZC5jZWxsc1tyb3cgKyByXVtjb2wgKyBjXSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWQuY2VsbHNbcm93ICsgcl1bY29sICsgY10uaXNBbGl2ZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG59XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbC5qcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcuanMnO1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyLmpzJztcblxuY29uc3QgbW9kZWwgPSBuZXcgTW9kZWwoe1xuICAgIGdyaWRTaXplOiAzNlxufSk7XG5jb25zdCB2aWV3ID0gbmV3IFZpZXcobW9kZWwpO1xuY29uc3QgY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKG1vZGVsLCB2aWV3KTtcblxudmlldy5pbml0Q29udHJvbGxlcihjb250cm9sbGVyKTtcblxubW9kZWwuaW5pdCgpOyJdLCJzb3VyY2VSb290IjoiIn0=